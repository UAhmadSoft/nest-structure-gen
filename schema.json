{
  "root": "D:/projects/authar-quran-api",
  "paths": {
    "src": "/src",
    "entity_module": "/src/infrastructure/entities/db.ts",
    "repository_module": "/src/infrastructure/repository/repository.module.ts",
    "usecase_module": "/src/usecases/usecase.module.ts",
    "controller_module": "/src/infrastructure/controllers/controller.module.ts"
  },
  "char_primary_key": false,
  "insert_to_modules": true,
  "tables": [
    {
      "name": "Challenges",
      "create_pagination_route": true,
      "create_relation_get_route": true,
      "properties": {
        "title": {
          "type": "varchar",
          "length": 255,
          "required": true
        },
        "description": {
          "type": "text",
          "required": true
        },
        "duration_days": {
          "type": "int4",
          "required": true,
          "comment": "Challenge duration in days (e.g., 3, 5, 7)"
        },
        "creator_type": {
          "type": "enum",
          "enum": ["ADMIN", "USER"],
          "default": "USER",
          "required": true
        },
        "status": {
          "type": "enum",
          "enum": ["DRAFT", "ACTIVE", "PENDING_VERIFICATION", "REJECTED", "ARCHIVED"],
          "required": true,
          "default": "PENDING_VERIFICATION"
        },
        "is_public": {
          "type": "boolean",
          "default": true,
          "comment": "Whether challenge is visible to all users"
        }
      },
      "relations": {
        "created_by_id": {
          "type": "ManyToOne",
          "entity": "Users",
          "required": true
        },
        "ayah_id": {
          "type": "ManyToOne",
          "entity": "Ayahs",
          "required": false,
          "comment": "Optional ayah reference for the challenge"
        },
        "challenge_participants": {
          "type": "OneToMany",
          "entity": "ChallengeParticipants"
        },
        "language_id": {
          "type": "ManyToOne",
          "entity": "Languages",
          "required": false
        }
      }
    },
    {
      "name": "ChallengeParticipants",
      "create_pagination_route": true,
      "create_relation_get_route": true,
      "properties": {
        "status": {
          "type": "enum",
          "enum": ["IN_PROGRESS", "COMPLETED", "FAILED", "ABANDONED"],
          "required": true,
          "default": "IN_PROGRESS"
        },
        "start_date": {
          "type": "date",
          "required": true
        },
        "end_date": {
          "type": "date",
          "required": false,
          "comment": "Expected end date based on duration"
        },
        "completed_date": {
          "type": "date",
          "required": false
        },
        "days_completed": {
          "type": "int4",
          "default": 0,
          "comment": "Number of days user has completed"
        },
        "current_streak": {
          "type": "int4",
          "default": 0,
          "comment": "Current consecutive days completed"
        },
        "notes": {
          "type": "text",
          "required": false,
          "comment": "User's personal notes for this challenge"
        }
      },
      "relations": {
        "challenge_id": {
          "type": "ManyToOne",
          "entity": "Challenges",
          "required": true
        },
        "user_id": {
          "type": "ManyToOne",
          "entity": "Users",
          "required": true
        }
      }
    }
  ]
}
